// wraps up all the interfaces for the daemon (in ./apis/)
// into a single file for easier inclusion elsewhere.

syntax = "proto3";

package mecomp;

import "google/protobuf/empty.proto";
import "apis/collection.proto";
import "apis/dynamic.proto";
import "apis/entities.proto";
import "apis/library.proto";
import "apis/misc.proto";
import "apis/playback.proto";
import "apis/playlist.proto";
import "apis/queue.proto";
import "apis/radio.proto";
import "apis/search.proto";
import "apis/state.proto";

message Path {
	string path = 1;
}

service MusicPlayer {
	// Miscellaneous
	rpc RegisterListener(RegisterListenerRequest) returns (google.protobuf.Empty);
	rpc Ping(google.protobuf.Empty) returns (PingResponse);
	rpc DaemonShutdown(google.protobuf.Empty) returns (google.protobuf.Empty);

	// Library maintenance
	rpc LibraryRescan(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc LibraryRescanInProgress(google.protobuf.Empty) returns (InProgressResponse);
	rpc LibraryAnalyze(LibraryAnalyzeRequest) returns (google.protobuf.Empty);
	rpc LibraryAnalyzeInProgress(google.protobuf.Empty) returns (InProgressResponse);
	rpc LibraryRecluster(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc LibraryReclusterInProgress(google.protobuf.Empty) returns (InProgressResponse);

	// Library inspection
	rpc LibraryBrief(google.protobuf.Empty) returns (LibraryBriefResponse);
	rpc LibraryFull(google.protobuf.Empty) returns (LibraryFullResponse);
	rpc LibraryArtistsBrief(google.protobuf.Empty) returns (ArtistBriefList);
	rpc LibraryArtistsFull(google.protobuf.Empty) returns (ArtistList);
	rpc LibraryAlbumsBrief(google.protobuf.Empty) returns (AlbumBriefList);
	rpc LibraryAlbumsFull(google.protobuf.Empty) returns (AlbumList);
	rpc LibrarySongsBrief(google.protobuf.Empty) returns (SongBriefList);
	rpc LibrarySongsFull(google.protobuf.Empty) returns (SongList);
	rpc LibraryPlaylistsBrief(google.protobuf.Empty) returns (PlaylistBriefList);
	rpc LibraryPlaylistsFull(google.protobuf.Empty) returns (PlaylistList);
	rpc LibraryCollectionsBrief(google.protobuf.Empty) returns (CollectionBriefList);
	rpc LibraryCollectionsFull(google.protobuf.Empty) returns (CollectionList);
    rpc LibraryDynamicPlaylistsFull(google.protobuf.Empty) returns (DynamicPlaylistList);
	rpc LibraryHealth(google.protobuf.Empty) returns (LibraryHealthResponse);

	// Library lookup helpers
	rpc LibrarySongGet(Ulid) returns (SongOption);
	rpc LibrarySongGetByPath(Path) returns (SongOption);
	rpc LibrarySongGetArtists(Ulid) returns (ArtistBriefListOption);
	rpc LibrarySongGetAlbum(Ulid) returns (AlbumBriefOption);
	rpc LibrarySongGetPlaylists(Ulid) returns (PlaylistBriefListOption);
	rpc LibrarySongGetCollections(Ulid) returns (CollectionBriefListOption);
	rpc LibraryAlbumGet(Ulid) returns (AlbumOption);
	rpc LibraryAlbumGetArtists(Ulid) returns (ArtistBriefListOption);
	rpc LibraryAlbumGetSongs(Ulid) returns (SongBriefListOption);
	rpc LibraryArtistGet(Ulid) returns (ArtistOption);
	rpc LibraryArtistGetSongs(Ulid) returns (SongBriefListOption);
	rpc LibraryArtistGetAlbums(Ulid) returns (AlbumBriefListOption);
    rpc LibraryPlaylistGet(Ulid) returns (PlaylistOption);
    rpc LibraryPlaylistGetByName(PlaylistName) returns (PlaylistOption);
    rpc LibraryPlaylistGetSongs(Ulid) returns (SongBriefListOption);
    rpc LibraryCollectionGet(Ulid) returns (CollectionOption);
    rpc LibraryCollectionGetSongs(Ulid) returns (SongBriefListOption);
    rpc LibraryDynamicPlaylistGet(Ulid) returns (DynamicPlaylistOption);
    rpc LibraryDynamicPlaylistGetSongs(Ulid) returns (SongBriefListOption);

	// State inspection
	rpc StateAudio(google.protobuf.Empty) returns (StateAudioResponse);
	rpc CurrentArtists(google.protobuf.Empty) returns (ArtistBriefListOption);
	rpc CurrentAlbum(google.protobuf.Empty) returns (AlbumBriefOption);
	rpc CurrentSong(google.protobuf.Empty) returns (SongBriefOption);

	// Random sampling
	rpc RandArtist(google.protobuf.Empty) returns (ArtistBriefOption);
	rpc RandAlbum(google.protobuf.Empty) returns (AlbumBriefOption);
	rpc RandSong(google.protobuf.Empty) returns (SongBriefOption);

	// Search
	rpc Search(SearchRequest) returns (SearchResult);
	rpc SearchArtist(SearchRequest) returns (ArtistBriefList);
	rpc SearchAlbum(SearchRequest) returns (AlbumBriefList);
	rpc SearchSong(SearchRequest) returns (SongBriefList);

	// Playback control
	rpc PlaybackToggle(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackPlay(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackPause(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackStop(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackRestart(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackSkipForward(PlaybackSkipRequest) returns (google.protobuf.Empty);
	rpc PlaybackSkipBackward(PlaybackSkipRequest) returns (google.protobuf.Empty);
	rpc PlaybackClearPlayer(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackClear(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackSeek(PlaybackSeekRequest) returns (google.protobuf.Empty);
	rpc PlaybackRepeat(PlaybackRepeatRequest) returns (google.protobuf.Empty);
	rpc PlaybackShuffle(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackVolume(PlaybackVolumeSetRequest) returns (google.protobuf.Empty);
	rpc PlaybackVolumeUp(PlaybackVolumeAdjustRequest) returns (google.protobuf.Empty);
	rpc PlaybackVolumeDown(PlaybackVolumeAdjustRequest) returns (google.protobuf.Empty);
	rpc PlaybackVolumeToggleMute(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackMute(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc PlaybackUnmute(google.protobuf.Empty) returns (google.protobuf.Empty);

	// Queue management
	rpc QueueAdd(RecordId) returns (google.protobuf.Empty);
	rpc QueueAddList(RecordIdList) returns (google.protobuf.Empty);
	rpc QueueSetIndex(QueueSetIndexRequest) returns (google.protobuf.Empty);
	rpc QueueRemoveRange(QueueRemoveRangeRequest) returns (google.protobuf.Empty);

	// Playlist management
	rpc PlaylistGetOrCreate(PlaylistName) returns (RecordId);
	rpc PlaylistRemove(Ulid) returns (google.protobuf.Empty);
	rpc PlaylistClone(Ulid) returns (RecordId);
	rpc PlaylistRemoveSongs(PlaylistRemoveSongsRequest) returns (google.protobuf.Empty);
	rpc PlaylistAdd(PlaylistAddRequest) returns (google.protobuf.Empty);
	rpc PlaylistAddList(PlaylistAddListRequest) returns (google.protobuf.Empty);
	rpc PlaylistRename(PlaylistRenameRequest) returns (PlaylistOption);
	rpc PlaylistExport(PlaylistExportRequest) returns (google.protobuf.Empty);
	rpc PlaylistImport(PlaylistImportRequest) returns (RecordId);

	// Collections
	rpc CollectionFreeze(CollectionFreezeRequest) returns (RecordId);

	// Radio
	rpc RadioGetSimilar(RadioSimilarRequest) returns (SongBriefList);
	rpc RadioGetSimilarIds(RadioSimilarRequest) returns (RecordIdList);

	// Dynamic playlists
	rpc DynamicPlaylistCreate(DynamicPlaylistCreateRequest) returns (RecordId);
	rpc DynamicPlaylistUpdate(DynamicPlaylistUpdateRequest) returns (DynamicPlaylistOption);
	rpc DynamicPlaylistRemove(Ulid) returns (google.protobuf.Empty);
	rpc DynamicPlaylistExport(Path) returns (google.protobuf.Empty);
	rpc DynamicPlaylistImport(Path) returns (DynamicPlaylistList);
}